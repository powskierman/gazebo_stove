# ============================================================================
# HOME ASSISTANT DETAILED ENTITIES CARD
# Gazebo Stove Thermostat, Controls & Diagnostics
# ============================================================================
#
# This is a comprehensive entities card with full organization, dividers,
# and grouped sections for easy monitoring and control of your Gazebo Stove.
#
# HOW TO ADD TO YOUR DASHBOARD:
# ============================================================================
# 1. In Home Assistant, go to your dashboard
# 2. Click the pencil icon (Edit Dashboard)
# 3. Click "Add Card" ‚Üí "Manual"
# 4. Copy ALL content from below the second line of equals signs
# 5. Paste into the YAML editor
# 6. Click "Save"
# 7. Exit edit mode (click outside the card or press Esc)
#
# TROUBLESHOOTING:
# ============================================================================
# - If entities don't show: Check that entity names exactly match your setup
# - If card is blank: Some entities may not exist - comment them out with #
# - Red warning on card: One or more entities are unavailable/unknown
#
# ============================================================================

type: entities
title: Gazebo Stove - Controls & Status
show_header_toggle: false

entities:
  # ========================================================================
  # SECTION 1: THERMOSTAT STATUS
  # ========================================================================
  # Shows current and desired temperature, plus thermostat state
  #
  - entity: sensor.gazebo_stove_gazebo_temperature
    name: "üå°Ô∏è Current Temperature"
    icon: mdi:thermometer

  - entity: number.gazebo_stove_desired_temperature
    name: "üéØ Desired Temperature"
    icon: mdi:thermometer-plus

  - entity: switch.gazebo_stove_propane_stove_relay
    name: "üî• Relay Status (Heating On/Off)"
    icon: mdi:fire

  - type: divider

  # ========================================================================
  # SECTION 2: PRESENCE & SCHEDULE MODE
  # ========================================================================
  # Controls whether stove operates in Home or Away mode
  #
  - entity: select.gazebo_stove_presence_mode
    name: "üè† Current Mode (Home/Away)"
    icon: mdi:home-account

  - entity: switch.gazebo_stove_heating_schedule
    name: "üìÖ Heating Schedule Enabled"
    icon: mdi:calendar-clock

  - type: divider

  # ========================================================================
  # SECTION 3: SCHEDULE TIMES
  # ========================================================================
  # Set what time to switch between Home Mode (heating) and Away Mode (off)
  # Format: Use 24-hour time (0-23 for hours, 0-59 for minutes)
  #
  - entity: number.gazebo_stove_home_mode_time_hour
    name: "‚è∞ Home Mode - Hour (0-23)"
    icon: mdi:home-clock

  - entity: number.gazebo_stove_home_mode_time_minute
    name: "‚è±Ô∏è Home Mode - Minute (0-59)"
    icon: mdi:home-clock

  - entity: number.gazebo_stove_away_mode_time_hour
    name: "‚è∞ Away Mode - Hour (0-23)"
    icon: mdi:clock-out

  - entity: number.gazebo_stove_away_mode_time_minute
    name: "‚è±Ô∏è Away Mode - Minute (0-59)"
    icon: mdi:clock-out

  - type: divider

  # ========================================================================
  # SECTION 4: MANUAL OVERRIDES
  # ========================================================================
  # Emergency controls that override the schedule
  # Manual Run: Forces heating for 15 minutes (Priority 2)
  # Manual Stop: Turns off stove immediately (Priority 1 - Highest)
  #
  - entity: switch.gazebo_stove_manual_run
    name: "üö® Emergency Heat (15 min)"
    icon: mdi:fire-alert

  - entity: switch.gazebo_stove_manual_stop
    name: "‚ùå Force Off (Highest Priority)"
    icon: mdi:power-off

  - type: divider

  # ========================================================================
  # SECTION 5: SENSOR CALIBRATION
  # ========================================================================
  # Fine-tune temperature readings and heating behavior
  #
  - entity: number.gazebo_stove_temperature_offset
    name: "üìè Temperature Offset (-5 to +5¬∞C)"
    icon: mdi:pencil

  - entity: number.gazebo_stove_heating_hysteresis
    name: "„Ä∞Ô∏è Heating Hysteresis"
    icon: mdi:sine-wave

  - type: divider

  # ========================================================================
  # SECTION 6: SYSTEM DIAGNOSTICS & STATUS
  # ========================================================================
  # Monitors system health and current operation state
  #
  - entity: binary_sensor.gazebo_stove_sensor_malfunction
    name: "‚ö†Ô∏è Sensor Malfunction"
    icon: mdi:alert-circle

  - entity: sensor.gazebo_stove_system_status
    name: "‚ÑπÔ∏è System Status"
    icon: mdi:information

  - type: divider

  # ========================================================================
  # SECTION 7: DEVICE INFORMATION & CONTROL
  # ========================================================================
  # WiFi connectivity, LED status, and device management
  #
  - entity: sensor.gazebo_stove_wifi_signal_strength
    name: "üì° WiFi Signal Strength"
    icon: mdi:wifi

  - entity: light.gazebo_stove_status_led
    name: "üí° Status LED"
    icon: mdi:led-on

  - type: divider

  # ========================================================================
  # SECTION 8: DEVICE CONTROL & MAINTENANCE
  # ========================================================================
  # Restart or safely shutdown the ESPHome device
  #
  - entity: button.gazebo_stove_device_restart
    name: "üîÑ Restart Device"
    icon: mdi:restart

  - entity: button.gazebo_stove_safe_shutdown
    name: "üõë Safe Shutdown"
    icon: mdi:power

# ============================================================================
# ENTITY REFERENCE & PRIORITY SYSTEM
# ============================================================================
#
# PRIORITY LEVELS (How the stove decides to heat):
# ============================================================================
# Priority 1 (Highest):  Manual Stop (Force Off) - Turn stove OFF immediately
# Priority 2:             Manual Run (Emergency Heat) - Turn stove ON for 15 min
# Priority 3:             Schedule Mode (Home/Away) - Use schedule times
# Priority 4 (Lowest):    Temperature Control - Heat until desired temp reached
#
# ENTITY IDS & DESCRIPTIONS:
# ============================================================================
#
# TEMPERATURE:
#   sensor.gazebo_stove_gazebo_temperature
#     ‚Üí ESPHome temperature sensor reading (DS18B20)
#     ‚Üí Real-time current temperature
#
#   number.gazebo_stove_desired_temperature
#     ‚Üí Target temperature you want (adjustable slider)
#     ‚Üí Range: 5-35¬∞C typically
#     ‚Üí Priority 4 uses this to heat/stop
#
# RELAY CONTROL:
#   switch.gazebo_stove_propane_stove_relay
#     ‚Üí GPIO12 relay switch controlling propane valve
#     ‚Üí ON = heating, OFF = no heating
#     ‚Üí Result of priority system decisions
#
# PRESENCE/MODE:
#   select.gazebo_stove_presence_mode
#     ‚Üí Selector: "Home" or "Away"
#     ‚Üí Manual override of schedule
#     ‚Üí Part of Priority 3 (Schedule)
#
#   switch.gazebo_stove_heating_schedule
#     ‚Üí Enable/disable the automatic schedule
#     ‚Üí When OFF: Schedule doesn't run (stays in current mode)
#     ‚Üí When ON: Switches modes at scheduled times
#
# SCHEDULE TIMES (24-hour format):
#   number.gazebo_stove_home_mode_time_hour/minute
#     ‚Üí Time to switch to Home Mode (heating enabled)
#     ‚Üí Example: 06:00 (6am) = Home Mode Hour: 6, Minute: 0
#
#   number.gazebo_stove_away_mode_time_hour/minute
#     ‚Üí Time to switch to Away Mode (heating disabled)
#     ‚Üí Example: 22:00 (10pm) = Away Mode Hour: 22, Minute: 0
#
# CALIBRATION:
#   number.gazebo_stove_temperature_offset
#     ‚Üí Adjust sensor reading if it's not accurate
#     ‚Üí Positive = sensor reads too high, adjust down
#     ‚Üí Negative = sensor reads too low, adjust up
#     ‚Üí Range: -5 to +5¬∞C
#
#   number.gazebo_stove_heating_hysteresis
#     ‚Üí Prevents relay from fluttering on/off at target temp
#     ‚Üí Typical: 0.5¬∞C (stops heating when within 0.5¬∞ of target)
#
# OVERRIDE CONTROLS:
#   switch.gazebo_stove_manual_run
#     ‚Üí Manually turn on heating for 15 minutes
#     ‚Üí Priority 2 (overrides schedule)
#     ‚Üí Auto-disables after 15 minutes
#     ‚Üí Use for emergency heating
#
#   switch.gazebo_stove_manual_stop
#     ‚Üí Immediately stop heating
#     ‚Üí Priority 1 (highest - overrides everything)
#     ‚Üí Prevents any heating until turned OFF
#     ‚Üí Use for emergency shutdown
#
# DIAGNOSTICS:
#   binary_sensor.gazebo_stove_sensor_malfunction
#     ‚Üí ON = Temperature sensor failure detected
#     ‚Üí OFF = Sensor reading normally
#     ‚Üí Check sensor wiring if this triggers
#
#   sensor.gazebo_stove_system_status
#     ‚Üí Text description of current system state
#     ‚Üí Shows which priority is active
#     ‚Üí Shows reason for current relay state
#
# CONNECTIVITY:
#   sensor.gazebo_stove_wifi_signal_strength
#     ‚Üí WiFi signal strength in dBm
#     ‚Üí -30 to -90 range (higher is better)
#     ‚Üí Affects responsiveness
#
#   light.gazebo_stove_status_led
#     ‚Üí RGB LED on the ESPHome device
#     ‚Üí ON/OFF controls LED power
#     ‚Üí Can be used for visual feedback
#
# MAINTENANCE:
#   button.gazebo_stove_device_restart
#     ‚Üí Restart the ESPHome microcontroller
#     ‚Üí Takes ~10 seconds
#     ‚Üí Maintains all settings
#     ‚Üí Use if device becomes unresponsive
#
#   button.gazebo_stove_safe_shutdown
#     ‚Üí Gracefully shut down the device
#     ‚Üí Relay goes OFF before shutdown
#     ‚Üí Device can be unplugged safely
#     ‚Üí Use before maintenance
#
# ============================================================================
# HOW THE PRIORITY SYSTEM WORKS
# ============================================================================
#
# The stove uses a 4-level priority system to decide when to heat:
#
# Priority 1 (Manual Stop):
#   IF Manual Stop is ON ‚Üí Relay OFF (stops heating immediately)
#   ‚îî‚îÄ Emergency shutdown, highest priority
#
# Priority 2 (Manual Run):
#   ELSE IF Manual Run is ON ‚Üí Relay ON (heat for 15 minutes)
#   ‚îî‚îÄ Emergency heating, 15-minute timer
#
# Priority 3 (Schedule Mode):
#   ELSE IF Schedule Enabled AND current time matches:
#     IF Schedule time says "Home Mode" ‚Üí Current Mode = Home
#     ELSE IF Schedule time says "Away Mode" ‚Üí Current Mode = Away
#
#   IF Current Mode = Home ‚Üí Enable heating
#   IF Current Mode = Away ‚Üí Disable heating
#   ‚îî‚îÄ Time-based automatic mode switching
#
# Priority 4 (Temperature Control):
#   ELSE (if current mode allows heating):
#     IF Current Temperature < Desired Temperature
#       ‚Üí Relay ON (heat until target reached)
#     ELSE IF Current Temperature >= (Desired Temperature + Hysteresis)
#       ‚Üí Relay OFF (stop heating)
#   ‚îî‚îÄ Maintains desired temperature
#
# ============================================================================
# TEMPERATURE READING DISPLAY
# ============================================================================
# The current temperature shows what the DS18B20 sensor is reading.
# If the reading seems off:
#
# 1. Check that "Temperature Offset" is correct (should be 0 normally)
# 2. Verify sensor is installed in the right location
# 3. Check for loose wiring
# 4. If offset is needed, adjust by -X or +X¬∞C in the offset field
#
# ============================================================================
# TYPICAL SETUP EXAMPLE
# ============================================================================
#
# Morning Schedule:
#   Home Mode Time: 06:00 (6 AM)
#   Away Mode Time: 22:00 (10 PM)
#   Desired Temp: 20¬∞C
#
# Behavior:
#   6:00 AM  ‚Üí Schedule switches to HOME MODE ‚Üí Heating enabled
#              Stove heats to 20¬∞C then maintains (Priority 4)
#   10:00 PM ‚Üí Schedule switches to AWAY MODE ‚Üí Heating disabled
#              Stove turns off (Priority 3 overrides Priority 4)
#   Anytime ‚Üí Manually toggle "Emergency Heat" for 15 min boost (Priority 2)
#   Anytime ‚Üí Toggle "Force Off" to immediately stop (Priority 1)
#
# ============================================================================
